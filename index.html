<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>Apache Spark + AI Meetup - Graph Juli 2019</title>

	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/moon.css">

	<!-- Theme used for syntax highlighting of code -->
	<link rel="stylesheet" href="lib/css/zenburn.css">

	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement('link');
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
		document.getElementsByTagName('head')[0].appendChild(link);
	</script>
</head>
<!---https://github.com/hakimel/reveal.js-->

<body>
	<div class="reveal">
		<div class="slides">
			<section data-background="img/pietro-jeng-n6B49lTx7NM-unsplash.jpg">
				<h1>Graph Analytics</h1>
				<h3>in der Mobilität</h3>
				<p>
					<small>Created by <a href="https://twitter.com/hopfi80">Dr. Andreas Hopfgartner</a> @ <a
							href="http://www.btelligent.com">b.telligent</a></small>
				</p>
			</section>
			<section>
				<section data-markdown>
					<script type="text/template">
					### Ein Graph in der Mobilität

					- Kanten: Straßen, Schienen, ...
					- Knoten: Kreuzungen, Haltestellen, POIs, ...
					- Attribute: Flow, Positionen der Nodes, ...
					- Typ: Gerichtet und ungerichtet, gewichtet, mehrere Knoten Entitäten möglich (k-partit)

					<img data-src="img/urban-street-network-graph-node-closeness-centrality.png" height="300" width="auto">
						</script>
				</section>
				<section data-markdown>
					<script type="text/template">
					### Was kann ich analysieren?
					
					- Die Struktur des Netzwerks selbst mit Ziel der Optimierung:
					 [Complex network analysis of public transportation networks](https://doi.org/10.1109/MTITS.2015.7223282)

					<img data-src="img/debrecen.png" height="350" width="auto">
						</script>
				</section>
				<section data-markdown>
					<script type="text/template">
					### Was kann ich analysieren?
					
					- Informationen über die Elemente in den Netzwerken selbst:
					[Beispiel](https://news.mit.edu/2016/how-ride-sharing-can-improve-traffic-save-money-and-help-environment-0104)
						+ Knoten (Nodes)
							* Centrality
							* Communities (Attribute)
							* Cliques
						+ Kanten (Edges)
							* ...
						</script>
				</section>
			</section>

			<section data-markdown>
				### Welche Tools stehen mir zur Verfügung?

				- Python
					+ [NetworkX](https://networkx.github.io/)
					+ [osmnx](https://geoffboeing.com/) für OpenStreetMap Daten
				- Spark
					+ [GraphX](https://spark.apache.org/graphx/) - RDD API
					+ [GraphFrames](https://github.com/graphframes/graphframes) - DataFrame API
				- Visualisierung
					+ [gephi](https://gephi.org/)
					+ [Holoviews](http://holoviews.org/reference/elements/bokeh/Graph.html) (Bokeh)
					+ d3js
			</section>

			<section>
				<section data-markdown>
					<script type="text/template">
					### What sind GraphFrames?

					> GraphFrames support general graph processing, similar to Apache Spark’s GraphX library. However,
					> GraphFrames are built on top of Spark DataFrames, resulting in some key advantages:
					
					<small>Taken from [link](https://databricks.com/blog/2016/03/03/introducing-graphframes.html)</small>
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
					* Python, Java & Scala APIs: GraphFrames provide uniform APIs for all 3 languages. For the first time, all
					algorithms in GraphX are available from Python & Java.
					* Powerful queries: GraphFrames allow users to phrase queries in the familiar, powerful APIs of Spark SQL
					and DataFrames. <!-- .element: class="fragment" -->
					* Saving & loading graphs: GraphFrames fully support DataFrame data sources, allowing writing and reading
					graphs using many formats like Parquet, JSON, and CSV. <!-- .element: class="fragment" -->
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
					- In GraphFrame werden Knoten und Kanten je als DataFrame repräsentiert
					- So können beliebige Daten als Attribute mit Knoten und Kanten verbunden werden <!-- .element: class="fragment" -->

					<pre class="fragment"><code class="hljs" data-line-numbers="7" data-trim>
							v = sqlContext.createDataFrame([
							  ("a", "Alice", 34),
							  ("b", "Bob", 36),
							  ("c", "Charlie", 30),
							], ["id", "name", "age"])
							
							e = sqlContext.createDataFrame([
							  ("a", "b", "friend"),
							  ("b", "c", "follow"),
							  ("c", "b", "follow"),
							], ["src", "dst", "relationship"])

							from graphframes import *
							g = GraphFrame(v, e)
							</code></pre>
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
					### Welche Algorithmen stehen mir zuf Verfügung?

					<iframe width="800" height="400" data-src="https://graphframes.github.io/graphframes/docs/_site/user-guide.html#graph-algorithms">
					</iframe>
				</script>
				</section>
			</section>
			<section>
				<section data-markdown>
					<script type="text/template">
					### Die Herausforderung
					
					Wir arbeiten mit Kunden in der Mobilität, die alle vor ähnlichen Herausforderungen stehen
					- Immer mehr Personen möchten in einem wachsend komplexem Umfeld transportiert werden

					<img data-src="img/publictransport.png" height=300>
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
					### Was man oft vergisst

					Abläufe, die für den Menschen einfach erscheinen, sind für einen Bordcomputer, eine Applikation, ein Leistellensystem
					oft eine große Herausforderung.

					<img data-src="img/berlin.jpg" height=300>
					</script>
				</section>
				<section data-markdown>
					Momentan haben wir es oft mit Log-Daten von verschiedenen Apps der Münchner Mobilitätsanbieter zu
					tun. Dort gibt is immer ein ähnliches Schema, eine Userbasis *u* möchte vom Dienstleister *d* in
					verschiedenen Transportgefäßen **v** von **a** nach **b** gebracht werden. Wir unterscheiden hier
					zwei Welten, die Mobilitätsanfrage des Users **Au**, das Mobilitätsangebot der
					Mobilitätsdienstleister **Ad** und die tatsächliche Nachfrage **N**.

					Bei diesem Use-Case alleine wird es zukünftig nicht bleiben. Man nehme an ein Fahrgast ist von einer
					Verzögerung betroffen und steht am Hauptbahnhof. Jetzt kann ihm alternativ eine schnellere Route
					empfohlen werden, oder es kann ihm der Besuch in seinem Lieblings-Shop in Bahnhofsnähe empfohlen
					werden, in das ihm vielleicht noch ein Angebot lockt. Hier werden also mehrere Netzwerke miteinander
					in Verbindung gebracht.

					Da die Daten sehr heterogen sind und wir momentan diese Daten nicht in originaler Form zeigen können
					(und randomisieren echt langweilige Ergebnisse liefert...), suchen wir uns ein sehr ähnliches
					Beispiel raus.

					ToDo: wie baue ich mir einen optimalen Graphen?
				</section>
			</section>
			<section data-background="img/jay-lee-hVxT5ojCmPw-unsplash.jpg">
				<img
					data-src="https://proxy.duckduckgo.com/iu/?u=https%3A%2F%2Fmedia.makeameme.org%2Fcreated%2Fany-questions-thought.jpg&f=1">
			</section>
		</div>
	</div>

	<script src="lib/js/head.min.js"></script>
	<script src="js/reveal.js"></script>

	<script>
		// More info about config & dependencies:
		// - https://github.com/hakimel/reveal.js#configuration
		// - https://github.com/hakimel/reveal.js#dependencies
		Reveal.initialize({
			dependencies: [
				{ src: 'plugin/markdown/marked.js' },
				{ src: 'plugin/markdown/markdown.js' },
				{ src: 'plugin/notes/notes.js', async: true },
				{ src: 'plugin/highlight/highlight.js', async: true, callback: function () { hljs.initHighlightingOnLoad(); } }
			]
		});
	</script>
</body>

</html>