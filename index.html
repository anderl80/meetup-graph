<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>Apache Spark + AI Meetup - Graph Juli 2019</title>

	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/moon.css">

	<!-- Theme used for syntax highlighting of code -->
	<link rel="stylesheet" href="lib/css/zenburn.css">

	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement('link');
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
		document.getElementsByTagName('head')[0].appendChild(link);
	</script>
</head>
<!---https://github.com/hakimel/reveal.js-->

<body>
	<div class="reveal">
		<div class="slides">
			<section data-background="img/pietro-jeng-n6B49lTx7NM-unsplash.jpg">
				<h1>Graph Analytics</h1>
				<h3>in der Mobilität</h3>
				<p>
					<small>Created by <a href="https://twitter.com/hopfi80">Dr. Andreas Hopfgartner</a> @ <a
							href="http://www.btelligent.com">b.telligent</a></small>
				</p>
			</section>
			<section>
				<section data-markdown>
					<script type="text/template">
					### Ein Graph in der Mobilität

					- Kanten: Straßen, Schienen, ...
					- Knoten: Kreuzungen, Haltestellen, POIs, ...
					- Attribute: Flow, Positionen der Nodes, ...
					- Typ: Gerichtet und ungerichtet, gewichtet, mehrere Knoten Entitäten möglich (k-partit)

					<img data-src="img/urban-street-network-graph-node-closeness-centrality.png" height="300" width="auto">
						</script>
				</section>
				<section data-markdown>
					<script type="text/template">
					### Was kann ich analysieren?
					
					- Die Struktur des Netzwerks selbst mit Ziel der Optimierung: [Beispiel: Complex network analysis of public transportation networks](https://doi.org/10.1109/MTITS.2015.7223282)

					<img data-src="img/debrecen.png" height="350" width="auto">
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
					### Was kann ich analysieren?
					
					- Fluss-Analyse innerhalb eines Netzes: [Beispiel: Edge Bundling in Flow Maps](https://anitagraser.com/2017/10/08/movement-data-in-gis-8-edge-bundling-for-flow-maps/)

					<img data-src="img/edgebundling.jpg" height="350" width="auto">
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
					### Was kann ich analysieren?
					
					- Informationen über (bewegliche) Elemente in den Netzwerken selbst: [Beispiel: Ride Sharing](https://news.mit.edu/2016/how-ride-sharing-can-improve-traffic-save-money-and-help-environment-0104)

					<img data-src="https://news.mit.edu/sites/mit.edu.newsoffice/files/styles/news_article_image_top_slideshow/public/images/2017/rideshare-algorithm-nyc-mit-csail_0.png?itok=GssElEHS" height="350" width="auto">
					</script>
				</section>
			</section>

			<section data-markdown>
				<script type="text/template">
				### Welche Tools stehen mir zur Verfügung?

				- Python <!-- .element: class="fragment" -->
					+ [NetworkX](https://networkx.github.io/)
					+ [osmnx](https://geoffboeing.com/) für OpenStreetMap Daten
					+ [GraphTool](https://graph-tool.skewed.de/)
				- Spark <!-- .element: class="fragment" -->
					+ [GraphX](https://spark.apache.org/graphx/) - RDD API
					+ [GraphFrames](https://github.com/graphframes/graphframes) - DataFrame API
				- Visualisierung <!-- .element: class="fragment" -->
					+ [gephi](https://gephi.org/)
					+ [Holoviews](http://holoviews.org/reference/elements/bokeh/Graph.html) (Bokeh)
					+ d3js
				</script>
			</section>

			<section>
				<section data-markdown>
					<script type="text/template">
					### What sind GraphFrames?

					> GraphFrames support general graph processing, similar to Apache Spark’s GraphX library. However,
					> GraphFrames are built on top of Spark DataFrames, resulting in some key advantages:
					
					<small>Taken from [link](https://databricks.com/blog/2016/03/03/introducing-graphframes.html)</small>
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
					* Python, Java & Scala APIs: GraphFrames provide uniform APIs for all 3 languages. For the first time, all
					algorithms in GraphX are available from Python & Java.
					* Powerful queries: GraphFrames allow users to phrase queries in the familiar, powerful APIs of Spark SQL
					and DataFrames. <!-- .element: class="fragment" -->
					* Saving & loading graphs: GraphFrames fully support DataFrame data sources, allowing writing and reading
					graphs using many formats like Parquet, JSON, and CSV. <!-- .element: class="fragment" -->
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
					- In GraphFrame werden Knoten und Kanten je als DataFrame repräsentiert
					- So können beliebige Daten als Attribute mit Knoten und Kanten verbunden werden <!-- .element: class="fragment" -->

					<pre class="fragment"><code class="hljs" data-line-numbers="7" data-trim>
							v = sqlContext.createDataFrame([
							  ("a", "Alice", 34),
							  ("b", "Bob", 36),
							  ("c", "Charlie", 30),
							], ["id", "name", "age"])
							
							e = sqlContext.createDataFrame([
							  ("a", "b", "friend"),
							  ("b", "c", "follow"),
							  ("c", "b", "follow"),
							], ["src", "dst", "relationship"])

							from graphframes import *
							g = GraphFrame(v, e)
							</code></pre>
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
					### Welche Algorithmen stehen mir zuf Verfügung?

					<iframe width="800" height="400" data-src="https://graphframes.github.io/graphframes/docs/_site/user-guide.html#graph-algorithms">
					</iframe>
				</script>
				</section>
			</section>
			<section>
				<section data-markdown>
					<script type="text/template">
					### Die Herausforderung
					
					> Immer mehr Personen möchten in einem wachsend komplexem Umfeld transportiert werden

					<img data-src="img/berlin.jpg" height=300>
					<aside class="notes">Wir arbeiten mit Mobilitätsdienstleisern zusammen, die alle vor ähnlichen Herausforderungen stehen</aside>
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
					### Was man oft vergisst

					- Abläufe, die für den Menschen einfach erscheinen, sind für einen Bordcomputer, eine Applikation, ein Leistellensystem
					oft eine große Herausforderung.
					- Aufbau einer optimalen Ladeinfrastruktur (Bus, Auto, Roller, eBike, eRoller) <!-- .element: class="fragment" -->
					- <!-- .element: class="fragment" --> Routenoptimierung "Ride Sharing" ([IsarTiger](https://www.mvg.de/services/mobile-services/mvg-isartiger.html))
					- Routenmatching (Ziel und Zweck des Einsatzes) <!-- .element: class="fragment" -->
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
					### Wiederkehrendes Schema

					- <!-- .element: class="fragment" --> eine Userbasis *u* 
					- <!-- .element: class="fragment" --> möchte vom Dienstleister *d* in
					- <!-- .element: class="fragment" --> Transportgefäßen **v** 
					- <!-- .element: class="fragment" --> von **a** nach **b** gebracht werden 
					
					<!-- .element: class="fragment" --> Wir unterscheiden hier
					- <!-- .element: class="fragment" --> die Mobilitätsanfrage des Users **Au**
					- <!-- .element: class="fragment" -->das Mobilitätsangebot der Mobilitätsdienstleister **Ad**
					- <!-- .element: class="fragment" --> die tatsächliche Nachfrage **N**
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
					### Potentielle Use Cases

					- Fahrgast ist von einer Verzögerung betroffen und steht am Hauptbahnhof
					- <!-- .element: class="fragment" --> Alternative Verbindungen empfehlen 
						+ Reaktion auf Echtzeit Anfragen anderer User
						+ Routing per Ride Sharing, Car Sharing, ...
					- <!-- .element: class="fragment" --> Verknüpfung mit *Social Media* 
						+ Vorsicht DSGVO und Opt-ins! Hier muss mit besonderer Vorsicht gehandelt werden
						+ Gutschein beim bevorzugten Laden in der Nähe
					- <!-- .element: class="fragment" --> Gruppen-Verhalten bei Verzögerungen 
						+ Welche Locations sind besonders gut besucht
					</script>
				</section>
			</section>
			<section>
				<section data-markdown>
					<script type="text/template">
					### Ein Anwendungsbeispiel
					
					<iframe class="fragment" width="1200" height="500" data-src="http://geoviews.org/gallery/bokeh/airport_graph.html"></iframe>

					</script>
					<aside class="notes">Daten aus Applikationen zumeist sehr heterogen und da wir momentan diese Daten nicht in originaler
							Form zeigen können (und randomisieren echt langweilige Ergebnisse liefert...), suchen wir uns ein sehr ähnliches
							Beispiel zur Veranschaulichung.</aside>
				</section>
				<section data-markdown>
					<script type="text/template">
					### Ein Anwendungsbeispiel

					|                  |                                   |
					|------------------|-----------------------------------|
					| Knoten           | Flughafen                         |
					| Kanten           | Flüge                             |
					| Knoten Attribute | Name, Kürzel, Staat, ...          |
					| Kanten Attribute | Route, Zeitpunkt, Verspätung, ... |
					| | |

					<!-- .element: class="fragment" --> Gerichteter Multi-Graph, Kanten zwischen zwei Knoten<br>x &rarr; y und y &rarr; x<br>können mehrfach auftreten.

					<!-- .element: class="fragment" --> <small>[Databricks Notebook](https://westeurope.azuredatabricks.net/?o=6175614239063779#notebook/4324544873301235/command/4324544873301236)</small>
					</script>
				</section>
			</section>
			<section data-background="img/jay-lee-hVxT5ojCmPw-unsplash.jpg">
				<img
					data-src="https://proxy.duckduckgo.com/iu/?u=https%3A%2F%2Fmedia.makeameme.org%2Fcreated%2Fany-questions-thought.jpg&f=1">
			</section>
		</div>
	</div>

	<script src="lib/js/head.min.js"></script>
	<script src="js/reveal.js"></script>

	<script>
		// More info about config & dependencies:
		// - https://github.com/hakimel/reveal.js#configuration
		// - https://github.com/hakimel/reveal.js#dependencies
		Reveal.initialize({
			dependencies: [
				{ src: 'plugin/markdown/marked.js' },
				{ src: 'plugin/markdown/markdown.js' },
				{ src: 'plugin/notes/notes.js', async: true },
				{ src: 'plugin/highlight/highlight.js', async: true, callback: function () { hljs.initHighlightingOnLoad(); } }
			]
		});
	</script>
</body>

</html>